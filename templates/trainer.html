<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title data-i18n="trainer_panel_title">Fitness Hub | Trainer</title>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="/static/js/i18n.js?v=4"></script>

    <link rel="stylesheet" href="/static/css/style.css?v=25">

    <style>
        /* –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –¢—Ä–µ–Ω–µ—Ä–∞ */
        body.trainer-mode {
            --btn-color: #32d74b; /* –ó–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ç—Ä–µ–Ω–µ—Ä–∞ */
            --secondary-bg: #1c1c1e;
        }
        .client-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .client-card:active {
            background: rgba(255,255,255,0.08);
        }
        .c-name {
            font-size: 18px;
            font-weight: bold;
            color: var(--text-color);
        }
        .c-info {
            font-size: 13px;
            color: var(--hint-color);
            margin-top: 4px;
        }
        .invite-box {
            background: rgba(50, 215, 75, 0.1);
            border: 1px dashed rgba(50, 215, 75, 0.3);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–∫–æ–Ω–∞–Ω–æ—ó –≤–ø—Ä–∞–≤–∏ –∫–ª—ñ—î–Ω—Ç–æ–º */
        .ex-row.ex-completed {
            border-left: 4px solid var(--success);
            background: rgba(50, 215, 75, 0.05);
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        .ex-row.ex-completed b {
            color: var(--success);
            text-decoration: line-through;
        }
        .ex-row.ex-completed span {
            color: var(--success);
            opacity: 0.8;
        }
    </style>
</head>

<body class="trainer-mode">

    <div id="loading-view" class="view loader-container">
        <div class="spinner"></div>
        <h3 id="loading-text" data-i18n="loading_ai">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</h3>
    </div>

    <div id="team-view" class="view active" style="padding-top: 20px;">

        <button onclick="window.location.href='/'" style="background: rgba(10, 132, 255, 0.15); color: var(--client-blue); box-shadow: none; margin-bottom: 20px;">
            üèãÔ∏è –í—ñ–¥–∫—Ä–∏—Ç–∏ –º—ñ–π —â–æ–¥–µ–Ω–Ω–∏–∫ (–ê—Ç–ª–µ—Ç)
        </button>

        <div class="header" style="text-align: center; margin-bottom: 30px;">
            <h2 style="margin: 0; color: var(--btn-color);" data-i18n="trainer_panel_title">–ü–∞–Ω–µ–ª—å –ù–∞—Å—Ç–∞–≤–Ω–∏–∫–∞</h2>
            <p style="margin: 5px 0 0 0; font-size: 13px; color: var(--hint-color);">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–æ—é —Ç–∞ –ø–ª–∞–Ω–∞–º–∏</p>
        </div>

        <div class="invite-box">
            <div style="font-size: 40px; margin-bottom: 10px;">üîó</div>
            <h3 style="margin-top: 0; color: var(--btn-color);" data-i18n="ref_link_title">–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞</h3>
            <p style="font-size: 13px; color: var(--text-color); opacity: 0.8;" data-i18n="ref_link_desc">–ù–∞–¥—ñ—à–ª—ñ—Ç—å —Ü–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —Å–≤–æ—î–º—É –ø—ñ–¥–æ–ø—ñ—á–Ω–æ–º—É. –í—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ—Ç—Ä–∞–ø–∏—Ç—å —É –≤–∞—à—É –∫–æ–º–∞–Ω–¥—É.</p>
            <input type="text" id="invite-link-input" readonly style="text-align: center; font-family: monospace; font-size: 12px; color: var(--accent-gold); margin-bottom: 10px; background: rgba(0,0,0,0.2);">
            <button onclick="copyLink()" style="margin: 0;" data-i18n="btn_copy_link">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è</button>
        </div>

        <h3 data-i18n="tab_clients">–í–∞—à—ñ –ö–ª—ñ—î–Ω—Ç–∏</h3>
        <div id="clients-list">
            <div class="spinner" style="margin: 20px auto; border-left-color: var(--btn-color);"></div>
        </div>
    </div>

    <div id="client-detail-view" class="view" style="padding-top: 20px;">
        <button class="secondary" onclick="showView('team-view')" style="width: auto; padding: 8px 15px; margin-bottom: 20px;" data-i18n="btn_back_to_list">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</button>

        <h2 id="cd-name" style="margin-top: 0; margin-bottom: 5px;">–Ü–º'—è –ö–ª—ñ—î–Ω—Ç–∞</h2>
        <div style="font-size: 14px; color: var(--hint-color); margin-bottom: 20px;"><span data-i18n="client_goal">–¶—ñ–ª—å</span>: <span id="cd-goal" style="color: var(--accent-gold); font-weight: bold;">...</span></div>

        <div class="day-tabs" style="display: flex; margin-bottom: 20px;">
            <div class="day-tab active" id="tab-btn-info" onclick="switchClientTab('info')" data-i18n="nav_data">–Ü–Ω—Ñ–æ —Ç–∞ –á–∂–∞</div>
            <div class="day-tab" id="tab-btn-plan" onclick="switchClientTab('plan')" data-i18n="nav_plan">–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è</div>
        </div>

        <div id="c-tab-info" class="c-tab active">

            <div class="card" style="margin-bottom: 15px;">
                <h3 style="margin-top: 0;">–§—ñ–∑–∏—á–Ω—ñ –¥–∞–Ω—ñ</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; font-size: 14px;">
                    <div style="width: 45%;">–í–∞–≥–∞: <b id="c-weight">...</b></div>
                    <div style="width: 45%;">–¶—ñ–ª—å: <b id="c-target" style="color: var(--accent-gold);">...</b></div>
                    <div style="width: 45%;">–ó—Ä—ñ—Å—Ç: <b id="c-height">...</b></div>
                    <div style="width: 45%;">–í—ñ–∫: <b id="c-age">...</b></div>
                </div>
            </div>

            <div class="card">
                <h3 style="margin-top: 0; color: var(--danger);" data-i18n="client_food_prefs">‚ö†Ô∏è –ê–ª–µ—Ä–≥—ñ—ó —Ç–∞ –í–ø–æ–¥–æ–±–∞–Ω–Ω—è</h3>
                <p id="cd-allergies" style="font-size: 14px; color: var(--text-color); white-space: pre-wrap;">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>

            <div class="card" style="margin-top: 15px;">
                <h3 style="margin-top: 0; color: var(--btn-color);" data-i18n="client_write_diet">üçè –†–∞—Ü—ñ–æ–Ω –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞</h3>
                <p style="font-size: 12px; color: var(--hint-color); margin-top: 0;">–¶–µ–π —Ç–µ–∫—Å—Ç –∫–ª—ñ—î–Ω—Ç –ø–æ–±–∞—á–∏—Ç—å —É —Å–≤–æ—î–º—É —â–æ–¥–µ–Ω–Ω–∏–∫—É —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è.</p>
                <textarea id="t-nutrition-input" rows="5" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å —Ç—É—Ç –ø–ª–∞–Ω —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è (–Ω–∞–ø—Ä: –°–Ω—ñ–¥–∞–Ω–æ–∫ - –≤—ñ–≤—Å—è–Ω–∫–∞ 100–≥...)"></textarea>
                <button onclick="saveNutritionPlan()" style="margin-top: 10px;" id="btn-save-nutri" data-i18n="btn_save_diet">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–∞—Ü—ñ–æ–Ω</button>
            </div>

            <div class="card" style="margin-top: 15px;">
                <h3 style="margin-top: 0;" data-i18n="title_nutrition">–°—å–æ–≥–æ–¥–Ω—ñ—à–Ω—î —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è</h3>
                <div style="font-size: 24px; font-weight: bold; margin-bottom: 15px;">üî• <span id="t-cal-consumed">0</span> –∫–∫–∞–ª</div>
                <div id="t-food-logs"></div>
            </div>

            <div id="client-checkin-card" class="card" style="margin-top: 15px; border: 1px solid var(--accent-gold); display: none;">
                <h3 style="margin-top: 0; color: var(--accent-gold);">üìä –ß–µ–∫-—ñ–Ω –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; font-size: 14px;">
                    <div style="width: 45%;">–°–æ–Ω: <b id="chk-val-sleep">...</b></div>
                    <div style="width: 45%;">–ï–Ω–µ—Ä–≥—ñ—è: <b id="chk-val-energy">...</b></div>
                    <div style="width: 45%;">–°—Ç—Ä–µ—Å: <b id="chk-val-stress">...</b></div>
                    <div style="width: 45%;">–ë—ñ–ª—å: <b id="chk-val-soreness">...</b></div>
                </div>
            </div>
        </div>

        <div id="c-tab-plan" class="c-tab" style="display: none;">
            <div class="card" style="text-align: center;">
                <p style="margin-top: 0; font-size: 14px; color: var(--hint-color);">–ü–æ—Ç–æ—á–Ω–∏–π –ø–ª–∞–Ω: <b id="cd-plan-status" style="color: var(--text-color);">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</b></p>
                <div style="display: flex; gap: 10px;">
                    <button onclick="generatePlanForClient()" style="flex: 1; font-size: 13px; padding: 10px;" data-i18n="btn_generate">üß† –®–Ü –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è</button>
                    <button class="secondary" onclick="createManualPlan()" style="flex: 1; font-size: 13px; padding: 10px;">‚úçÔ∏è –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—Ä—É—á–Ω—É</button>
                </div>
            </div>

            <h3 style="margin-top: 25px;">–ü—Ä–æ–≥—Ä–∞–º–∞ –∫–ª—ñ—î–Ω—Ç–∞</h3>

            <div id="trainer-day-tabs" class="day-tabs" style="display: none;"></div>

            <div id="t-workout-container" style="padding-bottom: 40px;"></div>
        </div>
    </div>

    <div id="t-edit-exercise-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="t-edit-ex-title" style="margin-top:0; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px;">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤–ø—Ä–∞–≤—É</h3>
            <input type="hidden" id="t-edit-ex-day">
            <input type="hidden" id="t-edit-ex-index">

            <label>–ù–∞–∑–≤–∞ –≤–ø—Ä–∞–≤–∏ (–∞–±–æ —Ç–∏–ø –∫–∞—Ä–¥—ñ–æ)</label>
            <input type="text" id="t-edit-ex-name" placeholder="–ù–∞–ø—Ä: –ü—Ä–∏—Å—ñ–¥–∞–Ω–Ω—è –∞–±–æ –ë—ñ–≥ –Ω–∞ –¥–æ—Ä—ñ–∂—Ü—ñ">

            <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥—Ö–æ–¥—ñ–≤</label>
            <input type="text" id="t-edit-ex-sets" placeholder="–ù–∞–ø—Ä: 4 (–∞–±–æ 1 –¥–ª—è –∫–∞—Ä–¥—ñ–æ)">

            <label>–ü–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è / –ß–∞—Å / RPE</label>
            <input type="text" id="t-edit-ex-reps" placeholder="–ù–∞–ø—Ä: 10 –ø–æ–≤—Ç. –∞–±–æ 20 —Ö–≤–∏–ª–∏–Ω">

            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="submitTrainerEditExercise()" style="margin-top: 0; flex: 3;" data-i18n="btn_save">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
                <button id="t-btn-delete-ex" class="action-btn delete" onclick="deleteTrainerExercise()" style="flex: 1; height: auto;">üóëÔ∏è</button>
            </div>
            <button class="action-btn delete" style="width: 100%; border-radius: 12px; margin-top: 10px; font-size: 16px; font-weight: bold;" onclick="closeModal('t-edit-exercise-modal')" data-i18n="btn_cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        </div>
    </div>

    <div id="exercise-info-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="info-modal-title" style="margin-top:0; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; color: var(--btn-color);">–ù–∞–∑–≤–∞ –≤–ø—Ä–∞–≤–∏</h3>

            <div style="margin-bottom: 15px;">
                <span style="font-size: 12px; color: var(--hint-color); text-transform: uppercase; font-weight: bold;">üéØ –¶—ñ–ª—å–æ–≤—ñ –º'—è–∑–∏:</span>
                <div id="info-modal-muscles" style="font-size: 14px; color: var(--text-color); margin-top: 4px; font-weight: bold;">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
            </div>

            <div style="margin-bottom: 20px; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px;">
                <span style="font-size: 12px; color: var(--hint-color); text-transform: uppercase; font-weight: bold;">üìñ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:</span>
                <div id="info-modal-instruction" style="font-size: 14px; color: var(--text-color); margin-top: 8px; line-height: 1.5; white-space: pre-wrap;">–®–Ü –∞–Ω–∞–ª—ñ–∑—É—î –±—ñ–æ–º–µ—Ö–∞–Ω—ñ–∫—É –≤–ø—Ä–∞–≤–∏...</div>
            </div>

            <a id="btn-youtube-link" href="#" target="_blank" style="display: none; background: #FF0000; color: #FFF; text-align: center; padding: 14px; border-radius: 12px; text-decoration: none; font-weight: bold; font-size: 16px; margin-bottom: 10px; justify-content: center; align-items: center; gap: 8px;">
                üé• YouTube
            </a>

            <button class="action-btn delete" style="width: 100%; border-radius: 12px; font-size: 16px; font-weight: bold;" onclick="closeModal('exercise-info-modal')" data-i18n="btn_close">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
    </div>

    <script src="/static/js/trainer.js?v=10" defer></script>

</body>
</html>